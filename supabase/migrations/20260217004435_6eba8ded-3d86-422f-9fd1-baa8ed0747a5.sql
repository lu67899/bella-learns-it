
-- Criar curso de JavaScript
DO $$
DECLARE
  v_curso_id uuid;
  v_mod1_id uuid;
  v_mod2_id uuid;
  v_mod3_id uuid;
  v_mod4_id uuid;
  v_mod5_id uuid;
  v_mod6_id uuid;
BEGIN
  -- Curso
  INSERT INTO public.cursos (nome, descricao, icone, ordem)
  VALUES ('JavaScript', 'Curso completo de JavaScript n√≠vel universit√°rio ‚Äî do zero ao avan√ßado, com exemplos pr√°ticos e analogias do dia a dia.', 'FileCode', 10)
  RETURNING id INTO v_curso_id;

  -- M√≥dulo 1: Fundamentos
  INSERT INTO public.modulos (curso_id, nome, descricao, icone, ordem)
  VALUES (v_curso_id, 'Fundamentos de JavaScript', 'Vari√°veis, tipos de dados e operadores ‚Äî a base de tudo.', 'Code', 0)
  RETURNING id INTO v_mod1_id;

  INSERT INTO public.modulo_topicos (modulo_id, titulo, conteudo, ordem, moedas) VALUES
  (v_mod1_id, 'Vari√°veis e Declara√ß√µes', E'## Vari√°veis: As Caixas do Programador\n\nImagine que voc√™ tem v√°rias **caixas organizadoras** em casa. Cada caixa tem uma **etiqueta** (nome) e guarda algo dentro (valor). √â exatamente isso que uma vari√°vel faz!\n\n### As 3 formas de criar vari√°veis\n\n```javascript\nvar nome = \"Maria\";    // forma antiga (evite!)\nlet idade = 25;        // pode mudar depois\nconst PI = 3.14159;    // nunca muda\n```\n\n### Diferen√ßas importantes\n\n| Palavra-chave | Pode mudar? | Escopo | Quando usar |\n|--------------|-------------|--------|-------------|\n| `var` | ‚úÖ Sim | Fun√ß√£o | ‚ùå Evite sempre |\n| `let` | ‚úÖ Sim | Bloco | ‚úÖ Quando o valor muda |\n| `const` | ‚ùå N√£o | Bloco | ‚úÖ Padr√£o preferido |\n\n### Analogia do Quadro Branco\n\n- **`let`** √© como escrever a l√°pis ‚Äî voc√™ pode apagar e reescrever\n- **`const`** √© como escrever com caneta permanente ‚Äî n√£o d√° pra mudar\n- **`var`** √© como escrever num papel solto ‚Äî pode se perder facilmente\n\n### Regras de nomea√ß√£o\n\n```javascript\n// ‚úÖ V√°lidos\nlet nomeCompleto = \"Jo√£o Silva\";\nlet _privado = true;\nlet $valor = 100;\n\n// ‚ùå Inv√°lidos\nlet 2nome = \"erro\";     // n√£o come√ßa com n√∫mero\nlet class = \"erro\";     // palavra reservada\n```\n\n### Hoisting: O Elevador Invis√≠vel\n\nO JavaScript \"sobe\" as declara√ß√µes `var` para o topo do c√≥digo antes de executar:\n\n```javascript\nconsole.log(x); // undefined (n√£o d√° erro!)\nvar x = 5;\n\nconsole.log(y); // ‚ùå ReferenceError!\nlet y = 10;\n```\n\n> üí° **Regra de ouro**: Use `const` por padr√£o. S√≥ use `let` quando precisar reatribuir. Nunca use `var`.\n\n### Exerc√≠cio Mental\nSe voc√™ declarar `const frutas = [\"ma√ß√£\", \"banana\"]` e depois fizer `frutas.push(\"uva\")`, vai dar erro? **N√£o!** Porque `const` impede a **reatribui√ß√£o**, mas n√£o impede **muta√ß√£o** do conte√∫do.', 0, 5),
  (v_mod1_id, 'Tipos de Dados', E'## Tipos de Dados: Os Ingredientes da Programa√ß√£o\n\nPense numa receita de bolo. Voc√™ precisa de diferentes tipos de ingredientes: farinha (s√≥lido), leite (l√≠quido), ovos (unidades). Na programa√ß√£o √© igual ‚Äî temos diferentes **tipos de dados** para representar diferentes informa√ß√µes.\n\n### Tipos Primitivos\n\n| Tipo | Exemplo | Analogia |\n|------|---------|----------|\n| `string` | `\"Ol√° mundo\"` | Um texto escrito num papel |\n| `number` | `42`, `3.14` | Um n√∫mero na calculadora |\n| `boolean` | `true`, `false` | Um interruptor de luz |\n| `undefined` | `undefined` | Uma caixa vazia que nunca foi preenchida |\n| `null` | `null` | Uma caixa intencionalmente esvaziada |\n\n### Strings: O Texto\n\n```javascript\nlet nome = \"JavaScript\";\nlet template = `Meu nome √© ${nome}`; // template literal ‚ú®\n\nnome.length;          // 10\nnome.toUpperCase();   // \"JAVASCRIPT\"\nnome.includes(\"Script\"); // true\nnome.slice(0, 4);     // \"Java\"\n```\n\n### Numbers: Os N√∫meros\n\n```javascript\nlet inteiro = 42;\nlet decimal = 3.14;\n\n// Cuidado com ponto flutuante!\n0.1 + 0.2; // 0.30000000000000004 üò±\n\nNumber(\"42\");     // 42\nparseInt(\"3.14\"); // 3\n```\n\n### Booleans: Verdadeiro ou Falso\n\n```javascript\n// Valores \"falsy\" (viram false)\n// 0, \"\", null, undefined, NaN, false\n\n// Valores \"truthy\" (viram true)\n// Todo o resto! \"0\", \" \", [], {}\n```\n\n### typeof: O Detetive de Tipos\n\n```javascript\ntypeof \"hello\";    // \"string\"\ntypeof 42;         // \"number\"\ntypeof true;       // \"boolean\"\ntypeof null;       // \"object\" üêõ (bug hist√≥rico!)\ntypeof [];         // \"object\"\n```\n\n> üí° **Dica**: Use `Array.isArray([])` para verificar arrays.\n\n### Exerc√≠cio Mental\nO que `typeof NaN` retorna? Surpreendentemente, `\"number\"`! NaN significa \"Not a Number\", mas seu **tipo** √© number.', 1, 5),
  (v_mod1_id, 'Operadores', E'## Operadores: As Ferramentas de C√°lculo\n\nOperadores s√£o como as ferramentas de uma oficina ‚Äî cada um tem uma fun√ß√£o espec√≠fica.\n\n### Operadores Aritm√©ticos\n\n```javascript\nlet a = 10, b = 3;\na + b;   // 13\na - b;   // 7\na * b;   // 30\na / b;   // 3.333...\na % b;   // 1 (resto)\na ** b;  // 1000 (potencia√ß√£o)\n```\n\n### Compara√ß√£o: == vs ===\n\n| Operador | Significado | Exemplo | Resultado |\n|----------|------------|---------|----------|\n| `==` | Igual (valor) | `5 == \"5\"` | `true` ‚ö†Ô∏è |\n| `===` | Igual (valor+tipo) | `5 === \"5\"` | `false` ‚úÖ |\n| `!=` | Diferente | `5 != \"5\"` | `false` |\n| `!==` | Estritamente diferente | `5 !== \"5\"` | `true` |\n\n```javascript\n0 == false;     // true üò∞\n0 === false;    // false ‚úÖ\n```\n\n> üéØ **Regra de ouro**: SEMPRE use `===` e `!==`.\n\n### Operadores L√≥gicos\n\n```javascript\ntrue && true;   // true (AND)\ntrue || false;  // true (OR)\n!true;          // false (NOT)\n```\n\n**Analogia do Port√£o**:\n- `&&` = Duas chaves necess√°rias\n- `||` = Qualquer chave serve\n- `!` = Inverte o estado\n\n### Operador Tern√°rio\n\n```javascript\nlet idade = 20;\nlet status = idade >= 18 ? \"Maior\" : \"Menor\";\n```\n\n### Exerc√≠cio Mental\nO que retorna `[] == ![]`? Incrivelmente, `true`! Coer√ß√£o de tipos do `==`. Mais um motivo para sempre usar `===`.', 2, 5);

  -- M√≥dulo 2: Estruturas de Controle
  INSERT INTO public.modulos (curso_id, nome, descricao, icone, ordem)
  VALUES (v_curso_id, 'Estruturas de Controle', 'Condicionais e loops ‚Äî controlando o fluxo do programa.', 'GitBranch', 1)
  RETURNING id INTO v_mod2_id;

  INSERT INTO public.modulo_topicos (modulo_id, titulo, conteudo, ordem, moedas) VALUES
  (v_mod2_id, 'Condicionais: if, else e switch', E'## Condicionais: As Encruzilhadas do C√≥digo\n\nImagine que voc√™ est√° dirigindo e chega numa bifurca√ß√£o. Se virar √† esquerda, vai pro trabalho. Se virar √† direita, vai pra casa.\n\n### if / else\n\n```javascript\nlet hora = 14;\n\nif (hora < 12) {\n  console.log(\"Bom dia! ‚òÄÔ∏è\");\n} else if (hora < 18) {\n  console.log(\"Boa tarde! üå§Ô∏è\");\n} else {\n  console.log(\"Boa noite! üåô\");\n}\n```\n\n### Analogia do Sem√°foro\n\n| Cor | A√ß√£o | Em c√≥digo |\n|-----|------|----------|\n| üü¢ Verde | Passe | `if (sinal === \"verde\") { andar(); }` |\n| üü° Amarelo | Aten√ß√£o | `else if (sinal === \"amarelo\") { reduzir(); }` |\n| üî¥ Vermelho | Pare | `else { parar(); }` |\n\n### switch: O Menu de Op√ß√µes\n\n```javascript\nlet dia = 3;\nswitch (dia) {\n  case 1: console.log(\"Segunda\"); break;\n  case 2: console.log(\"Ter√ßa\"); break;\n  case 3: console.log(\"Quarta\"); break;\n  case 5: console.log(\"Sexta üéâ\"); break;\n  default: console.log(\"Final de semana!\");\n}\n```\n\n> ‚ö†Ô∏è Esquecer o `break` faz o c√≥digo \"cair\" para o pr√≥ximo case.\n\n### Nullish Coalescing (??)\n\n```javascript\nlet valor = 0;\nvalor || 10;  // 10 (0 √© falsy!)\nvalor ?? 10;  // 0  (0 n√£o √© null/undefined) ‚úÖ\n```\n\n### Optional Chaining (?.)\n\n```javascript\nlet user = { endereco: { rua: \"Av. Brasil\" } };\nuser?.endereco?.rua;     // \"Av. Brasil\"\nuser?.telefone?.numero;  // undefined (sem erro!)\n```', 0, 5),
  (v_mod2_id, 'Loops: Repetindo com Intelig√™ncia', E'## Loops: A M√°quina de Repeti√ß√£o\n\nImagine que voc√™ precisa carimbar 100 documentos. Com um loop, a m√°quina repete automaticamente!\n\n### for: O Loop Cl√°ssico\n\n```javascript\nfor (let i = 0; i < 5; i++) {\n  console.log(`Passo ${i}`);\n}\n```\n\n### while: Enquanto For Verdade\n\n```javascript\nlet combustivel = 100;\nwhile (combustivel > 0) {\n  console.log(`Combust√≠vel: ${combustivel}%`);\n  combustivel -= 25;\n}\n```\n\n**Analogia**: O `while` √© como uma esteira de academia ‚Äî continua rodando **enquanto** voc√™ estiver correndo.\n\n### for...of vs for...in\n\n```javascript\n// for...of ‚Äî percorre VALORES\nlet frutas = [\"üçé\", \"üçå\", \"üçá\"];\nfor (let fruta of frutas) { console.log(fruta); }\n\n// for...in ‚Äî percorre CHAVES\nlet pessoa = { nome: \"Ana\", idade: 25 };\nfor (let chave in pessoa) { console.log(`${chave}: ${pessoa[chave]}`); }\n```\n\n### Compara√ß√£o R√°pida\n\n| Loop | Melhor para | Exemplo |\n|------|------------|--------|\n| `for` | Contadores | Repetir N vezes |\n| `while` | Condi√ß√£o indefinida | Esperar input |\n| `do...while` | Pelo menos 1x | Menu de op√ß√µes |\n| `for...of` | Arrays | Percorrer lista |\n| `for...in` | Objetos | Percorrer chaves |\n\n### break e continue\n\n```javascript\nfor (let i = 0; i < 10; i++) {\n  if (i === 5) break;    // sai do loop\n  if (i === 2) continue; // pula itera√ß√£o\n  console.log(i);\n}\n```\n\n### Exerc√≠cio Mental\n`while (true) {}` ‚Äî **loop infinito**! Sempre garanta que a condi√ß√£o vai se tornar `false`.', 1, 5);

  -- M√≥dulo 3: Fun√ß√µes e Escopo
  INSERT INTO public.modulos (curso_id, nome, descricao, icone, ordem)
  VALUES (v_curso_id, 'Fun√ß√µes e Escopo', 'Criando blocos reutiliz√°veis e entendendo escopo.', 'Workflow', 2)
  RETURNING id INTO v_mod3_id;

  INSERT INTO public.modulo_topicos (modulo_id, titulo, conteudo, ordem, moedas) VALUES
  (v_mod3_id, 'Fun√ß√µes e Arrow Functions', E'## Fun√ß√µes: As Receitas do Programador\n\nUma fun√ß√£o √© como uma **receita de cozinha**: ingredientes (par√¢metros), modo de preparo (c√≥digo) e resultado (retorno).\n\n### Function Declaration\n\n```javascript\nfunction saudacao(nome) {\n  return `Ol√°, ${nome}! üëã`;\n}\n```\n\n### Arrow Function (ES6+) ‚ú®\n\n```javascript\nconst somar = (a, b) => a + b;\nconst quadrado = x => x ** 2;\nconst agora = () => new Date();\n```\n\n### Compara√ß√£o\n\n| Tipo | Sintaxe | Hoisting? |\n|------|---------|----------|\n| Declarada | `function nome() {}` | ‚úÖ Sim |\n| Express√£o | `const nome = function() {}` | ‚ùå N√£o |\n| Arrow | `const nome = () => {}` | ‚ùå N√£o |\n\n### Par√¢metros Padr√£o e Rest\n\n```javascript\nfunction criar(nome, papel = \"estudante\") {\n  return { nome, papel };\n}\n\nfunction somarTodos(...nums) {\n  return nums.reduce((a, n) => a + n, 0);\n}\nsomarTodos(1, 2, 3, 4, 5); // 15\n```\n\n### Fun√ß√µes como Valores\n\n```javascript\nfunction executar(fn, valor) {\n  return fn(valor);\n}\nexecutar(quadrado, 5); // 25\n```\n\n> üí° Use Arrow para callbacks curtos. Para m√©todos de objeto, prefira fun√ß√µes declaradas (por causa do `this`).', 0, 5),
  (v_mod3_id, 'Escopo e Closures', E'## Escopo: Quem Pode Ver O Qu√™?\n\nImagine um pr√©dio. Quem est√° no **t√©rreo** (escopo global) √© vis√≠vel para todos. Quem est√° num **apartamento** (escopo local) s√≥ √© vis√≠vel ali dentro.\n\n### Escopo de Bloco\n\n```javascript\nif (true) {\n  let x = 10;\n  const y = 20;\n  var z = 30; // ‚ö†Ô∏è var ignora bloco!\n}\nconsole.log(z); // 30 (var escapa!)\nconsole.log(x); // ‚ùå ReferenceError\n```\n\n### Closures: A M√°gica do JS\n\nUm **closure** acontece quando uma fun√ß√£o \"lembra\" das vari√°veis do escopo onde foi criada.\n\n**Analogia da Mochila**: Voc√™ sai de casa levando uma mochila. Mesmo longe, ainda tem acesso ao que colocou nela.\n\n```javascript\nfunction criarContador() {\n  let contagem = 0;\n  return function() {\n    contagem++;\n    return contagem;\n  };\n}\n\nconst contador = criarContador();\ncontador(); // 1\ncontador(); // 2\ncontador(); // 3\n```\n\n### Uso Pr√°tico\n\n```javascript\nfunction criarMultiplicador(fator) {\n  return (n) => n * fator;\n}\nconst dobro = criarMultiplicador(2);\nconst triplo = criarMultiplicador(3);\ndobro(5);  // 10\ntriplo(5); // 15\n```\n\n### Armadilha com var em Loops\n\n```javascript\n// ‚ùå var ‚Äî imprime 3, 3, 3\nfor (var i = 0; i < 3; i++) {\n  setTimeout(() => console.log(i), 100);\n}\n\n// ‚úÖ let ‚Äî imprime 0, 1, 2\nfor (let i = 0; i < 3; i++) {\n  setTimeout(() => console.log(i), 100);\n}\n```\n\n### Exerc√≠cio Mental\nClosures permitem **dados privados**. A vari√°vel `contagem` n√£o pode ser acessada de fora ‚Äî s√≥ pela fun√ß√£o retornada. √â **encapsulamento**!', 1, 5);

  -- M√≥dulo 4: Arrays e Objetos
  INSERT INTO public.modulos (curso_id, nome, descricao, icone, ordem)
  VALUES (v_curso_id, 'Arrays e Objetos', 'Estruturas de dados fundamentais para organizar informa√ß√µes.', 'Database', 3)
  RETURNING id INTO v_mod4_id;

  INSERT INTO public.modulo_topicos (modulo_id, titulo, conteudo, ordem, moedas) VALUES
  (v_mod4_id, 'Arrays e M√©todos Essenciais', E'## Arrays: A Lista de Compras do Programador\n\nUm array √© como uma **lista de compras**: sequ√™ncia ordenada de itens com posi√ß√£o (√≠ndice).\n\n### M√©todos Mut√°veis\n\n```javascript\nlet nums = [1, 2, 3];\nnums.push(4);      // [1, 2, 3, 4]\nnums.pop();        // [1, 2, 3]\nnums.unshift(0);   // [0, 1, 2, 3]\nnums.shift();      // [1, 2, 3]\n```\n\n### M√©todos Imut√°veis (os mais importantes!) ‚ú®\n\n```javascript\nlet numeros = [1, 2, 3, 4, 5];\n\nnumeros.map(n => n * 2);         // [2, 4, 6, 8, 10]\nnumeros.filter(n => n % 2 === 0); // [2, 4]\nnumeros.find(n => n > 3);         // 4\nnumeros.reduce((a, n) => a + n, 0); // 15\nnumeros.some(n => n > 4);         // true\nnumeros.every(n => n > 0);        // true\n```\n\n### Analogia do Restaurante\n\n| M√©todo | Analogia | O que faz |\n|--------|----------|----------|\n| `map` | Chef transforma pratos | Aplica fun√ß√£o em cada item |\n| `filter` | Gar√ßom filtra pedidos | Seleciona por condi√ß√£o |\n| `find` | Procurar mesa vazia | Retorna primeiro match |\n| `reduce` | Somar a conta | Acumula em um valor |\n\n### Encadeamento (Chaining)\n\n```javascript\nlet resultado = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n  .filter(n => n % 2 === 0)\n  .map(n => n ** 2)\n  .reduce((a, b) => a + b, 0); // 220\n```\n\n### Spread Operator\n\n```javascript\nlet a = [1, 2, 3];\nlet b = [4, 5, 6];\nlet c = [...a, ...b]; // [1, 2, 3, 4, 5, 6]\nlet copia = [...a];   // c√≥pia independente\n```\n\n### Exerc√≠cio Mental\n`map` retorna **novo array**. `forEach` **n√£o retorna nada**. Use `map` quando precisa do resultado.', 0, 5),
  (v_mod4_id, 'Objetos e Destructuring', E'## Objetos: O RG do JavaScript\n\nObjetos s√£o como **fichas cadastrais** ‚Äî cada informa√ß√£o tem um nome (chave) e valor.\n\n```javascript\nlet pessoa = {\n  nome: \"Ana Silva\",\n  idade: 25,\n  hobbies: [\"leitura\", \"c√≥digo\"]\n};\n```\n\n### Acessando Propriedades\n\n```javascript\npessoa.nome;       // \"Ana Silva\" (ponto)\npessoa[\"idade\"];   // 25 (colchetes)\n```\n\n### Destructuring: Desempacotando ‚ú®\n\n**Analogia**: Abrir uma encomenda e separar cada item.\n\n```javascript\nlet { nome, idade } = pessoa;\nlet { nome: nomeCompleto } = pessoa; // renomear\nlet { telefone = \"N/A\" } = pessoa;   // padr√£o\n\nlet [primeiro, ...resto] = [1, 2, 3, 4];\n// primeiro = 1, resto = [2, 3, 4]\n```\n\n### Spread com Objetos\n\n```javascript\nlet base = { nome: \"Ana\", idade: 25 };\nlet completo = { ...base, cidade: \"SP\", idade: 26 };\n// { nome: \"Ana\", idade: 26, cidade: \"SP\" }\n```\n\n### Object Methods\n\n```javascript\nlet user = { nome: \"Ana\", idade: 25 };\nObject.keys(user);    // [\"nome\", \"idade\"]\nObject.values(user);  // [\"Ana\", 25]\nObject.entries(user); // [[\"nome\",\"Ana\"],[\"idade\",25]]\n```\n\n### Optional Chaining\n\n```javascript\nuser?.endereco?.rua; // undefined (sem erro!)\n```\n\n### JSON\n\n```javascript\nJSON.stringify(obj); // objeto ‚Üí string\nJSON.parse(str);     // string ‚Üí objeto\n```\n\n### Exerc√≠cio Mental\n`let a = {x:1}; let b = a; b.x = 2;` ‚Äî `a.x` √© `2`! Objetos s√£o por **refer√™ncia**. Use `{...obj}` para copiar.', 1, 5);

  -- M√≥dulo 5: DOM e Eventos
  INSERT INTO public.modulos (curso_id, nome, descricao, icone, ordem)
  VALUES (v_curso_id, 'DOM e Eventos', 'Interagindo com a p√°gina web.', 'Globe', 4)
  RETURNING id INTO v_mod5_id;

  INSERT INTO public.modulo_topicos (modulo_id, titulo, conteudo, ordem, moedas) VALUES
  (v_mod5_id, 'Manipula√ß√£o do DOM', E'## DOM: A √Årvore Viva da P√°gina\n\nO **DOM** √© a representa√ß√£o da p√°gina HTML como uma √°rvore de objetos que o JavaScript pode manipular.\n\n### Selecionando Elementos\n\n```javascript\ndocument.getElementById(\"titulo\");\ndocument.querySelector(\".btn-primary\");  // ‚ú® mais usado\ndocument.querySelectorAll(\".item\");\n```\n\n### Modificando Conte√∫do\n\n```javascript\nlet el = document.querySelector(\"#msg\");\nel.textContent = \"Novo texto!\";\nel.innerHTML = \"<strong>Negrito</strong>\";\n```\n\n### Classes CSS (melhor pr√°tica)\n\n```javascript\nlet box = document.querySelector(\".box\");\nbox.classList.add(\"ativo\");\nbox.classList.remove(\"inativo\");\nbox.classList.toggle(\"visivel\");\n```\n\n### Criando Elementos\n\n```javascript\nlet card = document.createElement(\"div\");\ncard.className = \"card\";\ncard.textContent = \"Novo card!\";\ndocument.querySelector(\"#lista\").appendChild(card);\ncard.remove(); // remover\n```\n\n### Analogia do Teatro\n\n| Conceito | Analogia |\n|----------|----------|\n| `document` | O teatro inteiro |\n| `querySelector` | Encontrar um ator |\n| `createElement` | Contratar novo ator |\n| `appendChild` | Colocar no palco |\n| `classList` | Trocar figurino |\n\n> üí° `textContent` = texto puro (seguro). `innerHTML` = interpreta HTML (cuidado com XSS!).', 0, 5),
  (v_mod5_id, 'Eventos e Interatividade', E'## Eventos: Ouvindo o Usu√°rio\n\nEventos s√£o como **sensores** numa casa inteligente ‚Äî detectam a√ß√µes e executam respostas.\n\n### addEventListener\n\n```javascript\nlet btn = document.querySelector(\"#meuBtn\");\nbtn.addEventListener(\"click\", () => {\n  console.log(\"Clicado! üéâ\");\n});\n```\n\n### Eventos Comuns\n\n| Evento | Quando dispara |\n|--------|---------------|\n| `click` | Clique do mouse |\n| `keydown` | Tecla pressionada |\n| `submit` | Formul√°rio enviado |\n| `input` | Valor do input muda |\n| `scroll` | Rolagem da p√°gina |\n\n### O Objeto Event\n\n```javascript\nbtn.addEventListener(\"click\", (event) => {\n  console.log(event.target);  // elemento clicado\n  console.log(event.type);    // \"click\"\n});\n```\n\n### preventDefault\n\n```javascript\nform.addEventListener(\"submit\", (e) => {\n  e.preventDefault(); // impede envio padr√£o\n  // validar e processar via JS\n});\n```\n\n### Event Delegation ‚ú®\n\nEm vez de um listener por item, coloque **um no pai**:\n\n```javascript\ndocument.querySelector(\"#lista\").addEventListener(\"click\", (e) => {\n  if (e.target.classList.contains(\"item\")) {\n    console.log(\"Item:\", e.target.textContent);\n  }\n});\n```\n\n**Analogia do Recepcionista**: Um recepcionista na entrada direciona cada visitante, em vez de cada sala ter um porteiro.\n\n> Event delegation: 1) Menos mem√≥ria, 2) Funciona com novos elementos, 3) Melhor performance.', 1, 5);

  -- M√≥dulo 6: Programa√ß√£o Ass√≠ncrona
  INSERT INTO public.modulos (curso_id, nome, descricao, icone, ordem)
  VALUES (v_curso_id, 'Programa√ß√£o Ass√≠ncrona', 'Callbacks, Promises e async/await.', 'Cpu', 5)
  RETURNING id INTO v_mod6_id;

  INSERT INTO public.modulo_topicos (modulo_id, titulo, conteudo, ordem, moedas) VALUES
  (v_mod6_id, 'Callbacks e Promises', E'## Ass√≠ncrono: O Gar√ßom Eficiente\n\nImagine um restaurante com **um s√≥ gar√ßom**. Se esperasse cada prato ficar pronto, seria um desastre! Ele anota pedidos e vai atendendo enquanto a cozinha prepara. Isso √© **ass√≠ncrono**!\n\n### Callbacks\n\n```javascript\nfunction buscarDados(callback) {\n  setTimeout(() => {\n    callback({ nome: \"Ana\" });\n  }, 2000);\n}\n```\n\n### Callback Hell üò±\n\n```javascript\nbuscarUsuario(id, function(u) {\n  buscarPedidos(u.id, function(p) {\n    buscarProdutos(p[0].id, function(prod) {\n      console.log(prod); // pir√¢mide!\n    });\n  });\n});\n```\n\n### Promises: A Solu√ß√£o\n\n| Estado | Significado | Analogia |\n|--------|-----------|----------|\n| pending | Aguardando | Pedido na cozinha |\n| fulfilled | Sucesso | Prato pronto! ‚úÖ |\n| rejected | Falha | Ingrediente acabou! ‚ùå |\n\n```javascript\nlet promessa = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve({ nome: \"Ana\" });\n  }, 2000);\n});\n\npromessa\n  .then(dados => console.log(dados))\n  .catch(erro => console.error(erro))\n  .finally(() => console.log(\"Fim!\"));\n```\n\n### Encadeamento Limpo\n\n```javascript\nbuscarUsuario(id)\n  .then(u => buscarPedidos(u.id))\n  .then(p => buscarProdutos(p[0].id))\n  .then(prod => console.log(prod))\n  .catch(err => console.error(err));\n```\n\n### Promise.all vs Promise.race\n- `Promise.all` ‚Üí espera **todas**\n- `Promise.race` ‚Üí retorna a **primeira**', 0, 5),
  (v_mod6_id, 'Async/Await e Fetch API', E'## Async/Await: Promises com Cara S√≠ncrona\n\nO `async/await` √© \"a√ß√∫car sint√°tico\" sobre Promises ‚Äî mesmo resultado, c√≥digo muito mais leg√≠vel.\n\n### Compara√ß√£o\n\n```javascript\n// Promise\nfunction buscar() {\n  return fetch(\"/api/dados\")\n    .then(res => res.json())\n    .then(dados => console.log(dados));\n}\n\n// Async/Await ‚ú®\nasync function buscar() {\n  const res = await fetch(\"/api/dados\");\n  const dados = await res.json();\n  console.log(dados);\n}\n```\n\n### Fetch API\n\n```javascript\n// GET\nasync function getUsuarios() {\n  const res = await fetch(\"https://api.exemplo.com/users\");\n  if (!res.ok) throw new Error(`HTTP ${res.status}`);\n  return await res.json();\n}\n\n// POST\nasync function criarUsuario(nome, email) {\n  const res = await fetch(\"/api/users\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ nome, email }),\n  });\n  return await res.json();\n}\n```\n\n### Tratamento de Erros\n\n```javascript\nasync function fetchSeguro(url) {\n  try {\n    const res = await fetch(url);\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\n    return await res.json();\n  } catch (err) {\n    console.error(\"Erro:\", err.message);\n    return null;\n  }\n}\n```\n\n### Paralelo com Promise.all\n\n```javascript\nconst [users, posts] = await Promise.all([\n  fetch(\"/api/users\").then(r => r.json()),\n  fetch(\"/api/posts\").then(r => r.json()),\n]);\n// Muito mais r√°pido que sequencial!\n```\n\n### Resumo\n\n| Abordagem | Legibilidade | Uso |\n|-----------|-------------|-----|\n| Callbacks | ‚≠ê | Legado |\n| Promises | ‚≠ê‚≠ê‚≠ê | Encadeamento |\n| async/await | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | Padr√£o moderno ‚úÖ |\n\n> üí° Sempre use `async/await` com `try/catch`. Sem `await`, voc√™ recebe a Promise, n√£o o valor!', 1, 5);

  -- Resumos
  INSERT INTO public.resumos (materia, titulo, conteudo) VALUES
  ('JavaScript', 'Vari√°veis e Tipos de Dados em JS', E'## Resumo: Vari√°veis e Tipos\n\n### Vari√°veis\n- **`const`** ‚Üí valor fixo (padr√£o preferido)\n- **`let`** ‚Üí valor pode mudar\n- **`var`** ‚Üí evite!\n\n### Tipos Primitivos\n| Tipo | Exemplo |\n|------|--------|\n| string | `\"texto\"` |\n| number | `42` |\n| boolean | `true`/`false` |\n| undefined | n√£o atribu√≠da |\n| null | aus√™ncia intencional |\n\n### Dicas\n- Use `===` sempre\n- `typeof null` ‚Üí `\"object\"` (bug hist√≥rico)\n- Template literals: `` `Ol√° ${nome}` ``'),
  ('JavaScript', 'Fun√ß√µes e Closures em JS', E'## Resumo: Fun√ß√µes\n\n### Tipos\n- **Declarada**: `function f() {}` (hoisting)\n- **Arrow**: `const f = () => {}` (sem hoisting)\n\n### Closures\nFun√ß√£o que \"lembra\" do escopo onde foi criada:\n```javascript\nfunction contador() {\n  let n = 0;\n  return () => ++n;\n}\n```\n\n### Escopo\n- Global ‚Üí vis√≠vel em todo lugar\n- Fun√ß√£o ‚Üí s√≥ dentro da fun√ß√£o\n- Bloco ‚Üí `let`/`const` ficam no `{}`'),
  ('JavaScript', 'Arrays e Objetos em JS', E'## Resumo: Estruturas de Dados\n\n### M√©todos de Array\n| M√©todo | Retorna |\n|--------|--------|\n| `map()` | Novo array |\n| `filter()` | Novo array |\n| `find()` | Um item |\n| `reduce()` | Um valor |\n\n### Destructuring\n```javascript\nlet { nome, idade } = pessoa;\nlet [a, ...rest] = array;\n```\n\n### Spread\n```javascript\nlet copia = [...array];\nlet merged = { ...obj1, ...obj2 };\n```\n\n> Objetos s√£o por **refer√™ncia**. Use spread para copiar.'),
  ('JavaScript', 'Programa√ß√£o Ass√≠ncrona em JS', E'## Resumo: Async\n\n### Evolu√ß√£o\n1. Callbacks ‚Üí pir√¢mide ‚ùå\n2. Promises ‚Üí `.then().catch()` ‚úÖ\n3. Async/Await ‚Üí padr√£o moderno ‚úÖ‚úÖ\n\n### Fetch\n```javascript\nasync function getData() {\n  try {\n    const res = await fetch(url);\n    return await res.json();\n  } catch (err) {\n    console.error(err);\n  }\n}\n```\n\n### Paralelo\n```javascript\nconst [a, b] = await Promise.all([\n  fetch(url1).then(r => r.json()),\n  fetch(url2).then(r => r.json()),\n]);\n```');

END $$;
